{"ast":null,"code":"var _jsxFileName = \"/Users/davit/Desktop/Asociation/client/src/adminpanel/components/CustomEditor/CustomEditor.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { convertToRaw, EditorState, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs'; // აუცილებელია HTML-ის კონვერტაციისთვის\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport styles from './CustomEditor.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CustomEditor = ({\n  onChange,\n  name,\n  section,\n  title,\n  value\n}) => {\n  _s();\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const [initialized, setInitialized] = useState(false); // ვიყენებთ ერთჯერად ჩასატვირთად\n\n  useEffect(() => {\n    if (value && !initialized) {\n      const contentBlock = htmlToDraft(value);\n      if (contentBlock) {\n        const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n        const newEditorState = EditorState.createWithContent(contentState);\n        setEditorState(newEditorState);\n        setInitialized(true);\n      }\n    }\n  }, [value, initialized]);\n  const handleEditorChange = state => {\n    setEditorState(state);\n    const html = draftToHtml(convertToRaw(state.getCurrentContent()));\n    onChange(section, name, html);\n  };\n  const uploadImageCallBack = async file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        resolve({\n          data: {\n            link: reader.result\n          }\n        });\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.customeditor,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.customeditor__title,\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Editor, {\n      editorState: editorState,\n      onEditorStateChange: handleEditorChange,\n      toolbar: {\n        options: ['inline', 'blockType', 'fontSize', 'list', 'textAlign', 'colorPicker', 'link', 'emoji', 'remove', 'history', 'image'],\n        image: {\n          uploadEnabled: true,\n          uploadCallback: uploadImageCallBack,\n          previewImage: true,\n          alt: {\n            present: true,\n            mandatory: false\n          }\n        }\n      },\n      wrapperClassName: styles.customeditor__wrap,\n      editorClassName: styles.customeditor__input\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n_s(CustomEditor, \"aweRH3Xea8C2u9cEqBnX1DIAwj0=\");\n_c = CustomEditor;\nexport default CustomEditor;\nvar _c;\n$RefreshReg$(_c, \"CustomEditor\");","map":{"version":3,"names":["useEffect","useState","convertToRaw","EditorState","ContentState","Editor","draftToHtml","htmlToDraft","styles","jsxDEV","_jsxDEV","CustomEditor","onChange","name","section","title","value","_s","editorState","setEditorState","createEmpty","initialized","setInitialized","contentBlock","contentState","createFromBlockArray","contentBlocks","newEditorState","createWithContent","handleEditorChange","state","html","getCurrentContent","uploadImageCallBack","file","Promise","resolve","reject","reader","FileReader","onloadend","data","link","result","readAsDataURL","className","customeditor","children","customeditor__title","fileName","_jsxFileName","lineNumber","columnNumber","onEditorStateChange","toolbar","options","image","uploadEnabled","uploadCallback","previewImage","alt","present","mandatory","wrapperClassName","customeditor__wrap","editorClassName","customeditor__input","_c","$RefreshReg$"],"sources":["/Users/davit/Desktop/Asociation/client/src/adminpanel/components/CustomEditor/CustomEditor.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { convertToRaw, EditorState, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs'; // აუცილებელია HTML-ის კონვერტაციისთვის\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport styles from './CustomEditor.module.scss';\n\nconst CustomEditor = ({ onChange, name, section, title, value }) => {\n    const [editorState, setEditorState] = useState(EditorState.createEmpty());\n    const [initialized, setInitialized] = useState(false); // ვიყენებთ ერთჯერად ჩასატვირთად\n\n    useEffect(() => {\n        if (value && !initialized) {\n            const contentBlock = htmlToDraft(value);\n            if (contentBlock) {\n                const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n                const newEditorState = EditorState.createWithContent(contentState);\n                setEditorState(newEditorState);\n                setInitialized(true);\n            }\n        }\n    }, [value, initialized]);\n\n    const handleEditorChange = (state) => {\n        setEditorState(state);\n        const html = draftToHtml(convertToRaw(state.getCurrentContent()));\n        onChange(section, name, html);\n    };\n\n    const uploadImageCallBack = async (file) => {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                resolve({ data: { link: reader.result } });\n            };\n            reader.readAsDataURL(file);\n        });\n    };\n\n    return (\n        <div className={styles.customeditor}>\n            <p className={styles.customeditor__title}>{title}</p>\n            <Editor\n                editorState={editorState}\n                onEditorStateChange={handleEditorChange}\n                toolbar={{\n                    options: [\n                        'inline', 'blockType', 'fontSize', 'list',\n                        'textAlign', 'colorPicker', 'link', 'emoji',\n                        'remove', 'history', 'image'\n                    ],\n                    image: {\n                        uploadEnabled: true,\n                        uploadCallback: uploadImageCallBack,\n                        previewImage: true,\n                        alt: { present: true, mandatory: false },\n                    },\n                }}\n                wrapperClassName={styles.customeditor__wrap}\n                editorClassName={styles.customeditor__input}\n            />\n        </div>\n    );\n};\n\nexport default CustomEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}